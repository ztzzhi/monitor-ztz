{"code":"import { reportTracker } from \"./reportTracker\";\nclass ztzCollection {\n    constructor() {\n        this.perColection = {\n            FP: 0,\n            FCP: 0,\n            TTFB: 0,\n            TTI: 0,\n            DCL: 0,\n            ONLOAD: 0,\n            DNS: 0,\n            TCP: 0,\n            DOM: 0,\n        };\n        this.onLoad();\n    }\n    onLoad() {\n        this.getPerformance();\n    }\n    getPerformance() {\n        let isFirstScreen = window.sessionStorage.getItem(\"ztz_firstScreen\") == null;\n        if (!isFirstScreen)\n            return;\n        if (window.performance && window.performance.getEntries) {\n            var perfEntries = window.performance.getEntries();\n            let t = perfEntries[0];\n            this.perColection.DNS = Number((t.domainLookupEnd - t.domainLookupStart).toFixed(2));\n            this.perColection.TCP = Number((t.connectEnd - t.connectStart).toFixed(2));\n            this.perColection.TTFB = Number((t.responseStart - t.requestStart).toFixed(2));\n            this.perColection.DOM = Number((t.domInteractive - t.responseEnd).toFixed(2));\n            this.perColection.TTI = Number((t.domInteractive - t.fetchStart).toFixed(2));\n            this.perColection.DCL = Number((t.domContentLoadedEventEnd - t.fetchStart).toFixed(2));\n            this.perColection.ONLOAD = Number(t.loadEventStart.toFixed(2));\n            for (var key in perfEntries) {\n                if (perfEntries[key].name &&\n                    perfEntries[key].name === \"first-contentful-paint\" &&\n                    perfEntries[key].startTime) {\n                    var fcp = Number(perfEntries[key].startTime.toFixed(2));\n                    this.perColection.FCP = fcp;\n                }\n                if (perfEntries[key].name &&\n                    perfEntries[key].name === \"first-paint\" &&\n                    perfEntries[key].startTime) {\n                    var fp = Number(perfEntries[key].startTime.toFixed(2));\n                    this.perColection.FP = fp;\n                }\n            }\n            window.sessionStorage.setItem(\"ztz_firstScreen\", JSON.stringify(this.perColection));\n            reportTracker({\n                data: this.perColection,\n            }, \"Performance\");\n        }\n    }\n}\nexport default ztzCollection;\n","references":["/Users/ztz/myPro/ztz-monitor/src/types/index.ts","/Users/ztz/myPro/ztz-monitor/src/core/reportTracker.ts"]}
